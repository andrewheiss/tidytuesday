<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.30">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>readme – TidyTuesday</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-de070a7b0ab54f8780927367ac907214.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-cd74cba69e18857596157f6e1f3f0483.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">TidyTuesday</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../../../index.html" class="sidebar-logo-link">
      <img src="../../../static/tt_hex.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About TidyTuesday</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Datasets</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../data/2025/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2025</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../data/2024/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2024</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../data/2023/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2023</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../data/2022/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2022</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../data/2021/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2021</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../data/2020/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2020</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../data/2019/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2019</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../data/2018/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2018</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../links.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Useful links</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#please-add-alt-text-to-your-posts" id="toc-please-add-alt-text-to-your-posts" class="nav-link active" data-scroll-target="#please-add-alt-text-to-your-posts">Please add alt text to your posts</a></li>
  <li><a href="#american-slavery-and-juneteenth" id="toc-american-slavery-and-juneteenth" class="nav-link" data-scroll-target="#american-slavery-and-juneteenth">American Slavery and Juneteenth</a>
  <ul class="collapse">
  <li><a href="#african-american-achievements" id="toc-african-american-achievements" class="nav-link" data-scroll-target="#african-american-achievements">African American Achievements</a></li>
  <li><a href="#suggested-reading-material" id="toc-suggested-reading-material" class="nav-link" data-scroll-target="#suggested-reading-material">Suggested Reading Material</a></li>
  </ul></li>
  <li><a href="#goals-of-this-week" id="toc-goals-of-this-week" class="nav-link" data-scroll-target="#goals-of-this-week">Goals of this Week</a>
  <ul class="collapse">
  <li><a href="#juneteenth-details" id="toc-juneteenth-details" class="nav-link" data-scroll-target="#juneteenth-details">Juneteenth details</a></li>
  </ul></li>
  <li><a href="#donations" id="toc-donations" class="nav-link" data-scroll-target="#donations">Donations</a></li>
  <li><a href="#dataset-summary" id="toc-dataset-summary" class="nav-link" data-scroll-target="#dataset-summary">Dataset Summary</a></li>
  <li><a href="#data-for-black-lives" id="toc-data-for-black-lives" class="nav-link" data-scroll-target="#data-for-black-lives">Data for Black Lives</a></li>
  <li><a href="#black-girls-code" id="toc-black-girls-code" class="nav-link" data-scroll-target="#black-girls-code">Black Girls Code</a></li>
  <li><a href="#black-in-ai" id="toc-black-in-ai" class="nav-link" data-scroll-target="#black-in-ai">Black in AI</a>
  <ul class="collapse">
  <li><a href="#get-the-data-here" id="toc-get-the-data-here" class="nav-link" data-scroll-target="#get-the-data-here">Get the data here</a></li>
  <li><a href="#get-the-data-here-1" id="toc-get-the-data-here-1" class="nav-link" data-scroll-target="#get-the-data-here-1">Get the data here</a></li>
  <li><a href="#data-dictionary" id="toc-data-dictionary" class="nav-link" data-scroll-target="#data-dictionary">Data Dictionary</a></li>
  </ul></li>
  <li><a href="#blackpast.csv" id="toc-blackpast.csv" class="nav-link" data-scroll-target="#blackpast.csv"><code>blackpast.csv</code></a></li>
  <li><a href="#slave_routes.csv" id="toc-slave_routes.csv" class="nav-link" data-scroll-target="#slave_routes.csv"><code>slave_routes.csv</code></a></li>
  <li><a href="#census.csv" id="toc-census.csv" class="nav-link" data-scroll-target="#census.csv"><code>census.csv</code></a>
  <ul class="collapse">
  <li><a href="#data-dictionary-1" id="toc-data-dictionary-1" class="nav-link" data-scroll-target="#data-dictionary-1">Data Dictionary</a></li>
  </ul></li>
  <li><a href="#firsts.csv" id="toc-firsts.csv" class="nav-link" data-scroll-target="#firsts.csv"><code>firsts.csv</code></a></li>
  <li><a href="#science.csv" id="toc-science.csv" class="nav-link" data-scroll-target="#science.csv"><code>science.csv</code></a>
  <ul class="collapse">
  <li><a href="#cleaning-script" id="toc-cleaning-script" class="nav-link" data-scroll-target="#cleaning-script">Cleaning Script</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="please-add-alt-text-to-your-posts" class="level3">
<h3 class="anchored" data-anchor-id="please-add-alt-text-to-your-posts">Please add alt text to your posts</h3>
<p>Please add alt text (alternative text) to all of your posted graphics for <code>#TidyTuesday</code>.</p>
<p>Twitter provides <a href="https://help.twitter.com/en/using-twitter/picture-descriptions">guidelines</a> for how to add alt text to your images.</p>
<p>The DataViz Society/Nightingale by way of Amy Cesal has an <a href="https://medium.com/nightingale/writing-alt-text-for-data-visualization-2a218ef43f81">article</a> on writing <em>good</em> alt text for plots/graphs.</p>
<blockquote class="blockquote">
<p>Here’s a simple formula for writing alt text for data visualization: ### Chart type It’s helpful for people with partial sight to know what chart type it is and gives context for understanding the rest of the visual. Example: Line graph ### Type of data What data is included in the chart? The x and y axis labels may help you figure this out. Example: number of bananas sold per day in the last year ### Reason for including the chart Think about why you’re including this visual. What does it show that’s meaningful. There should be a point to every visual and you should tell people what to look for. Example: the winter months have more banana sales ### Link to data or source Don’t include this in your alt text, but it should be included somewhere in the surrounding text. People should be able to click on a link to view the source data or dig further into the visual. This provides transparency about your source and lets people explore the data. Example: Data from the USDA</p>
</blockquote>
<p>Penn State has an <a href="https://accessibility.psu.edu/images/charts/">article</a> on writing alt text descriptions for charts and tables.</p>
<blockquote class="blockquote">
<p>Charts, graphs and maps use visuals to convey complex images to users. But since they are images, these media provide serious accessibility issues to colorblind users and users of screen readers. See the <a href="https://accessibility.psu.edu/images/charts/">examples on this page</a> for details on how to make charts more accessible.</p>
</blockquote>
<p>The <code>{rtweet}</code> package includes the <a href="https://docs.ropensci.org/rtweet/reference/post_tweet.html">ability to post tweets</a> with alt text programatically.</p>
<p>Need a <strong>reminder</strong>? There are <a href="https://chrome.google.com/webstore/detail/twitter-required-alt-text/fpjlpckbikddocimpfcgaldjghimjiik/related">extensions</a> that force you to remember to add Alt Text to Tweets with media.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://www.blackpast.org/wp-content/uploads/Abolition_of_slavery_celebration_Washington_DC_April_19_1866_Public_domain_illustration_by_Frederick_Dielman.jpg" class="img-fluid figure-img"></p>
<figcaption>Abolition of slavery celebration, Washington DC April 19 1866</figcaption>
</figure>
</div>
</section>
<section id="american-slavery-and-juneteenth" class="level1">
<h1>American Slavery and Juneteenth</h1>
<p>We are revisiting data from previous celebrations of African American Achievements along with historical data on the American slave trade.</p>
<ul>
<li><a href="https://github.com/rfordatascience/tidytuesday/blob/main/data/2020/2020-06-09/readme.md">Original 2020-06-09</a></li>
<li><a href="https://github.com/rfordatascience/tidytuesday/tree/main/data/2020/2020-06-16">Original 2020-06-16</a></li>
</ul>
<p>Also consider using a WEB DuBois style for your plots:</p>
<ul>
<li><a href="https://medium.com/nightingale/style-and-rich-detail-on-viewing-an-original-w-e-b-du-bois-data-visualization-part-4-40cc7bd18cfb">WEB DuBois</a></li>
<li><a href="https://dataliteracy.com/anthony-starks-on-recreating-du-boiss-iconic-style/">Anthony Starks, recreating DuBois’ iconic style</a></li>
</ul>
<p>The data this week comes from <a href="https://www.census.gov/content/dam/Census/library/working-papers/2002/demo/POP-twps0056.pdf">US Census’s Archives</a>, <a href="https://slavevoyages.org/">Slave Voyages</a>, and <a href="https://www.blackpast.org/african-american-history-timeline/">Black Past</a>.</p>
<p>Additional details can be found via <a href="https://en.wikipedia.org/wiki/Slavery_in_the_United_States">Wikipedia’s Article on Slavery in the US</a>, <a href="https://www.blackpast.org/">BlackPast.org</a>, and a <a href="https://www.theguardian.com/news/2019/aug/15/400-years-since-slavery-timeline">Guardian article on Slavery</a>.</p>
<p>Lastly, <a href="https://www.blackpast.org/african-american-history/juneteenth-birth-african-american-holiday-2/">BlackPast.org</a> and <a href="https://www.vox.com/identities/2018/6/19/17476482/juneteenth-holiday-emancipation-african-american-celebration-history">Vox</a> has an article about the importance of Juneteenth as a moment and what the holiday commemorates.</p>
<section id="african-american-achievements" class="level2">
<h2 class="anchored" data-anchor-id="african-american-achievements">African American Achievements</h2>
<p>Additional data this week comes from <a href="https://en.wikipedia.org/wiki/List_of_African-American_inventors_and_scientists">Wikipedia</a> &amp; <a href="https://en.wikipedia.org/wiki/List_of_African-American_firsts">Wikipedia</a>. This will be a celebration of Black Lives, their achievements, and many of their battles against racism across their lives. This is in emphasis that <code>Black Lives Matter</code> and we’re focusing on a celebration of these lives. Each of those Wikipedia articles above have additional details and sub-links that are highly worth reading through.</p>
<p>For additional datasets related to describing racial problems that still exist in the US, please see a few of our previous <code>#TidyTuesday</code> datasets:<br>
- Note, if you decide to use these datasets please read through the source material to better understand the nuance behind the data.<br>
- <a href="https://github.com/rfordatascience/tidytuesday/tree/main/data/2019/2019-09-24">School Diversity</a><br>
- <a href="https://github.com/rfordatascience/tidytuesday/tree/main/data/2019/2019-01-22">Vera Institute Incarceration Trends</a><br>
- <a href="https://github.com/rfordatascience/tidytuesday/tree/main/data/2019/2019-03-19">The Stanford Open Policing Project</a></p>
<p>The article for this week is the obituary for <a href="https://www.stltoday.com/news/local/obituaries/david-blackwell-fought-racism-became-world-famous-statistician/article_8ea41058-5f35-5afa-9c3a-007200c5c179.html">David Blackwell - Fought racism; became world famous statistician</a>.</p>
</section>
<section id="suggested-reading-material" class="level2">
<h2 class="anchored" data-anchor-id="suggested-reading-material">Suggested Reading Material</h2>
<p>Please use your best judgement when working with this data. There is a lot of pain and suffering that we cannot fully capture in simple numbers and charts. We believe that it is important to understand how wide-spread slavery was, how many people were affected then, and how this continually impacts the world.</p>
<p><a href="https://www.tolerance.org/sites/default/files/2018-02/TT-Teaching-Hard-History-American-Slavery-Report-WEB-February2018.pdf">Teaching Hard History - American Slavery</a> &gt; The consequences of slavery continue to distort and stunt lives in America, so it’s quite right that we should engage in what can be an agonizing conversation about this history. Only when our history is faced squarely can removing Confederate monuments be properly understood, as a small but significant step toward ending the celebration of treason and white supremacy, if not toward ameliorating their effects.</p>
<p>We are influenced by the <a href="https://www.tolerance.org/magazine/publications/teaching-hard-history-american-slavery">“Teaching Hard History” resources</a>. Please take the time to review these materials, examine some of the quick <a href="https://www.tolerance.org/frameworks/teaching-hard-history/american-slavery/key-concept-videos#keyconcept7">Summary Videos</a></p>
<p>The full article around these education materials can be found <a href="https://www.tolerance.org/sites/default/files/2018-02/TT-Teaching-Hard-History-American-Slavery-Report-WEB-February2018.pdf">here</a>.</p>
<p><img src="key-concepts.png" class="img-fluid"></p>
</section>
</section>
<section id="goals-of-this-week" class="level1">
<h1>Goals of this Week</h1>
<p>The goal of this week’s TidyTuesday is to share data related to just how widespread slavery was in the history of the United States (and the rest of the world), highlight the ongoing suppression and violence against Black Lives across hundreds of years and continuing into the present, and celebrate the end of slavery via <code>Juneteenth</code> (June 19th) which falls on Thursday of this week. While the <a href="https://www.archives.gov/exhibits/featured-documents/emancipation-proclamation">Emancipation Proclamation</a> was made law as of 1863-01-01, slave owners in the South - and specifically within Texas - still maintained slavery through 1865 when Union soldiers were able to enforce the law abolishing slavery in the region.</p>
<p>With the provided datasets we can piece together a grim picture of the kidnapping, forced transport, and enslavement of MILLIONS of African people into the Americas and throughout the world across hundreds of years. Additional focus is given across the data for those enslaved into British America or the United States of America itself from 1600-1865. The Black Past dataset adds additional details around the slow granting of various rights to African-Americans, post-slavery brutality, violence and racism, as well as celebrations of achievements across many different categories. The Census data highlights the total slave populations across the United States during the slavery era. This included children born into slavery or additional details around slaves who were not kidnapped and transported by ship.</p>
<p>The last dataset, <code>african_names.csv</code> records a history of freed slaves. These slaves were mostly freed during ship transport, had their names and ages recorded and were returned to free ports. Please note that while the data is accurate as historical records can be, often the rescuers and the Africans did not speak the same language, so names and ages are approximate.</p>
<p>The Guardian put together a <a href="https://www.theguardian.com/news/2019/aug/15/400-years-since-slavery-timeline">detailed article</a> with many graphs highlighting the widespread practice of slavery and subsequent post-slavery racism against Black people in the United States across 400 years (1619 to 2019).</p>
<p>H/t to <a href="https://twitter.com/SeanfromSeabeck/status/1232363570312036352?s=20">Sean Clements</a> for pointing out the Slave Voyages database and for creating a small <a href="https://seanfromseabeck.shinyapps.io/slave_trade/">Shiny app</a> using that data.</p>
<section id="juneteenth-details" class="level2">
<h2 class="anchored" data-anchor-id="juneteenth-details">Juneteenth details</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://s.hdnux.com/photos/74/03/45/15743330/3/rawImage.jpg" class="img-fluid figure-img"></p>
<figcaption>Juneteenth Inscription</figcaption>
</figure>
</div>
<p><a href="https://www.thc.texas.gov/public/upload/Juneteenth%20%2814GV08%29%20inscription.pdf">Texas Historical Commission Juneteenth Inscription</a></p>
<blockquote class="blockquote">
<p>COMMEMORATED ANNUALLY ON JUNE 19TH, JUNETEENTH IS THE OLDEST KNOWN CELEBRATION OF THE END OF SLAVERY IN THE U.S. THE EMANCIPATION PROCLAMATION, ISSUED BY PRESIDENT ABRAHAM LINCOLN ON SEP. 22, 1862, ANNOUNCED, “THAT ON THE 1ST DAY OF JANUARY, A.D. 1863, ALL PERSONS HELD AS SLAVES WITHIN ANY STATE…IN REBELLION AGAINST THE U.S. SHALL BE THEN, THENCEFORWARD AND FOREVER FREE.” HOWEVER, IT WOULD TAKE THE CIVIL WAR AND PASSAGE OF THE 13TH AMENDMENT TO THE CONSTITUTION TO END THE BRUTAL INSTITUTION OF AFRICAN AMERICAN SLAVERY. AFTER THE CIVIL WAR ENDED IN APRIL 1865 MOST SLAVES IN TEXAS WERE STILL UNAWARE OF THEIR FREEDOM. THIS BEGAN TO CHANGE WHEN UNION TROOPS ARRIVED IN GALVESTON. MAJ. GEN. GORDON GRANGER, COMMANDING OFFICER, DISTRICT OF TEXAS, FROM HIS HEADQUARTERS IN THE OSTERMAN BUILDING (STRAND AND 22ND ST.), READ ‘GENERAL ORDER NO. 3’ ON JUNE 19, 1865. THE ORDER STATED “THE PEOPLE OF TEXAS ARE INFORMED THAT, IN ACCORDANCE WITH A PROCLAMATION FROM THE EXECUTIVE OF THE UNITED STATES, ALL SLAVES ARE FREE. THIS INVOLVES AN ABSOLUTE EQUALITY OF PERSONAL RIGHTS AND RIGHTS OF PROPERTY BETWEEN FORMER MASTERS AND SLAVES.” WITH THIS NOTICE, RECONSTRUCTION ERA TEXAS BEGAN. FREED AFRICAN AMERICANS OBSERVED “EMANCIPATION DAY,” AS IT WAS FIRST KNOWN, AS EARLY AS 1866 IN GALVESTON. AS COMMUNITY GATHERINGS GREW ACROSS TEXAS, CELEBRATIONS INCLUDED PARADES, PRAYER, SINGING, AND READINGS OF THE PROCLAMATION. IN THE MID-20TH CENTURY, COMMUNITY CELEBRATIONS GAVE WAY TO MORE PRIVATE COMMEMORATIONS. A RE-EMERGENCE OF PUBLIC OBSERVANCE HELPED JUNETEENTH BECOME A STATE HOLIDAY IN 1979. INITIALLY OBSERVED IN TEXAS, THIS LANDMARK EVENT’S LEGACY IS EVIDENT TODAY BY WORLDWIDE COMMEMORATIONS THAT CELEBRATE FREEDOM AND THE TRIUMPH OF THE HUMAN SPIRIT.</p>
</blockquote>
</section>
</section>
<section id="donations" class="level1">
<h1>Donations</h1>
<ul>
<li><a href="https://www.blackpast.org/donate/">Donate to Blackpast.org</a><br>
</li>
<li><a href="https://www.tolerance.org/">Donate to Teaching Tolerance</a></li>
</ul>
</section>
<section id="dataset-summary" class="level1">
<h1>Dataset Summary</h1>
<p><a href="https://slavevoyages.org/voyage/about#methodology/introduction/0/en/"><code>slave_routes.csv</code></a> with methodology and details can be found <a href="https://slavevoyages.org/voyage/about#methodology/introduction/0/en/">here</a>.</p>
<blockquote class="blockquote">
<p>The 36,000 trans-Atlantic voyages contained in the database allows us to infer the total number of voyages carrying slaves from Africa. The Estimates page suggests that 12 ½ million captives (12,520,000) departed Africa for the Americas. Dividing this total by the average number of people embarked per voyage, 304 individuals, yields 41,190 voyages. Similarly, the Estimates pages suggests that 10.7 million enslaved Africans disembarked,mainly in the Americas. Dividing by the average number disembarked per voyage, 265 people, yields an estimated 40,380 voyages arriving. Not all 36,000 voyages in the database carried slaves from Africa. A total of 633 voyages (1.8%) never reached the African coast because they were lost at sea, captured or suffered some other misfortune. After removing these voyages, the database contains some trace of 85 percent of voyages that embarked captives. The database also contains records of 34,106 voyages that disembarked slaves, or could have done so (in other words, for some of these we do not know the outcome of the voyage). A total of 668 of these disembarked their slaves inthe Old World. The latter group comprised mainly ships captured in the nineteenth century which were taken to Sierra Leone and St.&nbsp;Helena as part of the attempt to suppress the trade.</p>
</blockquote>
<p><code>census.csv</code></p>
<p><a href="https://www2.census.gov/geo/pdfs/maps-data/maps/reference/us_regdiv.pdf">Census regions/divisions</a></p>
<blockquote class="blockquote">
<p>HISTORICAL CENSUS STATISTICS ON POPULATION TOTALS BY RACE, 1790 TO 1990</p>
</blockquote>
<blockquote class="blockquote">
<p>As noted earlier, the racial categories used in the decennial census have reflected social usage rather than an attempt to define race biologically or genetically. From 1790 to 1850, the only categories recorded were White and Black (Negro), with Black designated as free and slave.</p>
</blockquote>
<p><a href="https://slavevoyages.org/resources/about#african-names-database/0/en/"><code>african_names.csv</code></a></p>
<p>This is essentially a record of slaves who were freed during their forced transport.</p>
<blockquote class="blockquote">
<p>During the last 60 years of the trans-Atlantic slave trade, courts around the Atlantic basins condemned over two thousand vessels for engaging in the traffic and recorded the details of captives found on board including their African names. The African Names Database was created from these records, now located in the Registers of Liberated Africans at the Sierra Leone National Archives, Freetown, as well as Series FO84, FO313, CO247 and CO267 held at the British National Archives in London. Links are provided to the ships in the Voyages Database from which the liberated Africans were rescued, as well as to the African Origins site where users can hear the names pronounced and help us identify the languages in which they think the names are used.</p>
</blockquote>
<p><a href="https://www.blackpast.org/african-american-history-timeline/"><code>blackpast.csv</code></a></p>
<blockquote class="blockquote">
<p>BlackPast is dedicated to providing a global audience with reliable and accurate information on the history of African America and of people of African ancestry around the world. We aim to promote greater understanding through this knowledge to generate constructive change in our society.</p>
</blockquote>
<p>There are additional full text of <a href="https://www.blackpast.org/african-american-history/perspectives-african-american-history/">perspectives</a> and <a href="https://www.blackpast.org/african-american-history/speeches-african-american-history/">speeches</a> that are worth reading through.</p>
<p>We’d also like to take the chance to highlight a few potential projects to support or get involved with:</p>
</section>
<section id="data-for-black-lives" class="level1">
<h1><a href="http://d4bl.org/">Data for Black Lives</a></h1>
<blockquote class="blockquote">
<p>Data for Black Lives is a movement of activists, organizers, and mathematicians committed to the mission of using data science to create concrete and measurable change in the lives of Black people. Since the advent of computing, big data and algorithms have penetrated virtually every aspect of our social and economic lives. These new data systems have tremendous potential to empower communities of color. Tools like statistical modeling, data visualization, and crowd-sourcing, in the right hands, are powerful instruments for fighting bias, building progressive movements, and promoting civic engagement.</p>
<p>But history tells a different story, one in which data is too often wielded as an instrument of oppression, reinforcing inequality and perpetuating injustice. Redlining was a data-driven enterprise that resulted in the systematic exclusion of Black communities from key financial services. More recent trends like predictive policing, risk-based sentencing, and predatory lending are troubling variations on the same theme. Today, discrimination is a high-tech enterprise.</p>
</blockquote>
</section>
<section id="black-girls-code" class="level1">
<h1><a href="https://www.blackgirlscode.com/">Black Girls Code</a></h1>
<blockquote class="blockquote">
<p>Black Girls CODE is devoted to showing the world that black girls can code, and do so much more. By reaching out to the community through workshops and after school programs, Black Girls CODE introduces computer coding lessons to young girls from underrepresented communities in programming languages such as Scratch or Ruby on Rails. Black Girls CODE has set out to prove to the world that girls of every color have the skills to become the programmers of tomorrow. By promoting classes and programs we hope to grow the number of women of color working in technology and give underprivileged girls a chance to become the masters of their technological worlds. Black Girls CODE’s ultimate goal is to provide African-American youth with the skills to occupy some of the 1.4 million computing job openings expected to be available in the U.S. by 2020, and to train 1 million girls by 2040.</p>
</blockquote>
</section>
<section id="black-in-ai" class="level1">
<h1><a href="https://blackinai.github.io/">Black in AI</a></h1>
<blockquote class="blockquote">
<p>Black in AI (BAI) is a multi-institutional, transcontinental initiative designed to create a place for sharing ideas, fostering collaborations, and discussing initiatives to increase the presence of Black individuals in the field of AI. To this end, we hold an annual technical workshop series, run mentoring programs, and maintain various fora for fostering partnerships and collaborations.</p>
<p>If you are in the field of AI and self-identify as Black, please fill out <a href="https://goo.gl/forms/CMDkD5CuLjc0IAJi1">this Google Form</a> to request to join. Note, due to the volume of requests, there may be delays in processing your application.</p>
<p>We also welcome <strong>allies</strong> to join our group using the Google form. Allies will be added to our email lists, where we send out group updates and requests for assistance.</p>
</blockquote>
<p>The <code>firsts.csv</code> dataset has 479 records of African-Americans breaking the color barrier across a wide range of topics. I’ve adapted the raw text from Wikipedia to highlight: - The year of the event<br>
- The role/action/topic<br>
- The person or people involved<br>
- Addition of gender<br>
- A category of topics</p>
<p>The <code>science.csv</code> dataset also celebrates the achievements of African-Americans, specifically related to Patents and Scientific achievements. One of the amazing scientists present in this dataset is <a href="https://en.wikipedia.org/wiki/David_Blackwell">David Blackwell</a> - an African-American Mathematician and Statistician with significant contributions to game theory, probability theory, information theory, and Bayesian statistics. There is currently a proposal to rename the Fisher Lectureship award after David Blackwell as mentioned above..</p>
<section id="get-the-data-here" class="level3">
<h3 class="anchored" data-anchor-id="get-the-data-here">Get the data here</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the Data</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>firsts <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2020/2020-06-09/firsts.csv'</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>science <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2020/2020-06-09/science.csv'</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Or read in with tidytuesdayR package (https://github.com/dslc-io/tidytuesdayR)</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Either ISO-8601 date or year/week works!</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Install via pak::pak("dslc-io/tidytuesdayR")</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>tuesdata <span class="ot">&lt;-</span> tidytuesdayR<span class="sc">::</span><span class="fu">tt_load</span>(<span class="st">'2020-06-09'</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>tuesdata <span class="ot">&lt;-</span> tidytuesdayR<span class="sc">::</span><span class="fu">tt_load</span>(<span class="dv">2020</span>, <span class="at">week =</span> <span class="dv">24</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>firsts <span class="ot">&lt;-</span> tuesdata<span class="sc">$</span>firsts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="get-the-data-here-1" class="level3">
<h3 class="anchored" data-anchor-id="get-the-data-here-1">Get the data here</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the Data</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>blackpast <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2020/2020-06-16/blackpast.csv'</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>census <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2020/2020-06-16/census.csv'</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>slave_routes <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2020/2020-06-16/slave_routes.csv'</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>african_names <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2020/2020-06-16/african_names.csv'</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Or read in with tidytuesdayR package (https://github.com/dslc-io/tidytuesdayR)</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Either ISO-8601 date or year/week works</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Install via pak::pak("dslc-io/tidytuesdayR")</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>tuesdata <span class="ot">&lt;-</span> tidytuesdayR<span class="sc">::</span><span class="fu">tt_load</span>(<span class="st">'2020-06-16'</span>)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>tuesdata <span class="ot">&lt;-</span> tidytuesdayR<span class="sc">::</span><span class="fu">tt_load</span>(<span class="dv">2020</span>, <span class="at">week =</span> <span class="dv">25</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>blackpast <span class="ot">&lt;-</span> tuesdata<span class="sc">$</span>blackpast</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="data-dictionary" class="level3">
<h3 class="anchored" data-anchor-id="data-dictionary">Data Dictionary</h3>
</section>
</section>
<section id="blackpast.csv" class="level1">
<h1><code>blackpast.csv</code></h1>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">variable</th>
<th style="text-align: left;">class</th>
<th style="text-align: left;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">year</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Year of event</td>
</tr>
<tr class="even">
<td style="text-align: left;">events</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Details of events</td>
</tr>
<tr class="odd">
<td style="text-align: left;">subject</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Subject category</td>
</tr>
<tr class="even">
<td style="text-align: left;">country</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Country where event occurred or affected</td>
</tr>
<tr class="odd">
<td style="text-align: left;">state</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">State within a country</td>
</tr>
<tr class="even">
<td style="text-align: left;">era</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Era when event occurred</td>
</tr>
</tbody>
</table>
</section>
<section id="slave_routes.csv" class="level1">
<h1><code>slave_routes.csv</code></h1>
<p>Please note that there is missing data for many of the voyages, where this database only contains details for approximately 5 million enslaved Africans who arrived alive at the final port. Many slaves died in transport, or the details around the slave voyage were not fully recorded.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 45%">
<col style="width: 25%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">variable</th>
<th style="text-align: left;">class</th>
<th style="text-align: left;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">voyage_id</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">Unique id for the slave voyage</td>
</tr>
<tr class="even">
<td style="text-align: left;">ship_name</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Name of Ship</td>
</tr>
<tr class="odd">
<td style="text-align: left;">port_origin</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Port of Origin</td>
</tr>
<tr class="even">
<td style="text-align: left;">place_of_purchase</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Place where slaves were enslaved and purchased</td>
</tr>
<tr class="odd">
<td style="text-align: left;">port_arrival</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Port where the slave ship arrived</td>
</tr>
<tr class="even">
<td style="text-align: left;">year_arrival</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">Year of arrival</td>
</tr>
<tr class="odd">
<td style="text-align: left;">n_slaves_arrived</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">Number of slaves that arrived at final destination</td>
</tr>
<tr class="even">
<td style="text-align: left;">captains_name</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Name of the captain of the slave ship</td>
</tr>
</tbody>
</table>
</section>
<section id="census.csv" class="level1">
<h1><code>census.csv</code></h1>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">variable</th>
<th style="text-align: left;">class</th>
<th style="text-align: left;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">region</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Census region</td>
</tr>
<tr class="even">
<td style="text-align: left;">division</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Census division</td>
</tr>
<tr class="odd">
<td style="text-align: left;">year</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">Census year</td>
</tr>
<tr class="even">
<td style="text-align: left;">total</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">Census total population by region/division</td>
</tr>
<tr class="odd">
<td style="text-align: left;">white</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">White population</td>
</tr>
<tr class="even">
<td style="text-align: left;">black</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">Black population</td>
</tr>
<tr class="odd">
<td style="text-align: left;">black_free</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">Free black population</td>
</tr>
<tr class="even">
<td style="text-align: left;">black_slaves</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">Enslaved black population</td>
</tr>
</tbody>
</table>
<section id="data-dictionary-1" class="level3">
<h3 class="anchored" data-anchor-id="data-dictionary-1">Data Dictionary</h3>
</section>
</section>
<section id="firsts.csv" class="level1">
<h1><code>firsts.csv</code></h1>
<table class="caption-top table">
<colgroup>
<col style="width: 29%">
<col style="width: 32%">
<col style="width: 38%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">variable</th>
<th style="text-align: left;">class</th>
<th style="text-align: left;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">year</td>
<td style="text-align: left;">integer</td>
<td style="text-align: left;">Year of the achievement</td>
</tr>
<tr class="even">
<td style="text-align: left;">accomplishment</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">accomplishment - the actual achievement or attainment</td>
</tr>
<tr class="odd">
<td style="text-align: left;">person</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">The person or persons who accomplished the specific accomplishment</td>
</tr>
<tr class="even">
<td style="text-align: left;">gender</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Gender - indicates either female AND African-American, or a more general African-American first</td>
</tr>
<tr class="odd">
<td style="text-align: left;">category</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">A few meta-categories of different accomplishments</td>
</tr>
</tbody>
</table>
</section>
<section id="science.csv" class="level1">
<h1><code>science.csv</code></h1>
<table class="caption-top table">
<colgroup>
<col style="width: 55%">
<col style="width: 20%">
<col style="width: 24%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">variable</th>
<th style="text-align: left;">class</th>
<th style="text-align: left;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">name</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Name of scientist/inventor</td>
</tr>
<tr class="even">
<td style="text-align: left;">birth</td>
<td style="text-align: left;">integer</td>
<td style="text-align: left;">Birth year</td>
</tr>
<tr class="odd">
<td style="text-align: left;">death</td>
<td style="text-align: left;">integer</td>
<td style="text-align: left;">Death year (NA if still alive)</td>
</tr>
<tr class="even">
<td style="text-align: left;">occupation_s</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Occupation (1 or more occupation, separated by a ;)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">inventions_accomplishments</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Inventions or accomplishment</td>
</tr>
<tr class="even">
<td style="text-align: left;">references</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">References to articles</td>
</tr>
<tr class="odd">
<td style="text-align: left;">links</td>
<td style="text-align: left;">character</td>
<td style="text-align: left;">Links to their Wikipedia page (contains images and more information)</td>
</tr>
</tbody>
</table>
<section id="cleaning-script" class="level3">
<h3 class="anchored" data-anchor-id="cleaning-script">Cleaning Script</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pdftools) <span class="co"># reading in the PDF tables</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># requires tidy 1.0 and dplyr 1.0 for below example</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># black past, african names &amp; slave routes database</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Just cleaned up the names</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>routes <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"2020/2020-06-16/slave_routes.csv"</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># test plot</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>cleaned_routes <span class="sc">%&gt;%</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">decade =</span> <span class="dv">10</span> <span class="sc">*</span> (year_arrival <span class="sc">%/%</span> <span class="dv">10</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(decade) <span class="sc">%&gt;%</span> </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">sum</span>(n_slaves_arrived, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> decade, <span class="at">y =</span> n)) <span class="sc">+</span> </span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_number</span>())</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a> <span class="sc">-----------------------------------------------------------</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>raw_names <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"2020/2020-06-16/african_names.csv"</span>)</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>raw_names <span class="sc">%&gt;%</span> </span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>() <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>gender, <span class="at">ncol =</span> <span class="dv">1</span>)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Census Populations ------------------------------------------------------</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in the raw PDF</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>raw_pdf <span class="ot">&lt;-</span> pdftools<span class="sc">::</span><span class="fu">pdf_text</span>(<span class="st">"2020/2020-06-16/POP-twps0056.pdf"</span>)</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="co"># test on one page</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>raw_text <span class="ot">&lt;-</span> raw_pdf[[<span class="dv">31</span>]] <span class="sc">%&gt;%</span> </span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Some attempts at cleaning the data</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>mw_test <span class="ot">&lt;-</span> raw_text <span class="sc">%&gt;%</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>  .[<span class="dv">7</span><span class="sc">:</span><span class="dv">38</span>] <span class="sc">%&gt;%</span> </span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>  .[<span class="fu">str_detect</span>(., <span class="st">"......."</span>)] <span class="sc">%&gt;%</span> </span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>  .[<span class="fu">str_which</span>(<span class="fu">str_sub</span>(., <span class="dv">1</span>), <span class="st">"1"</span>)] <span class="sc">%&gt;%</span> </span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_remove_all</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>  .[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">9</span><span class="sc">:</span><span class="dv">26</span>)] <span class="sc">%&gt;%</span> </span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="st">"([0-9])(</span><span class="sc">\\</span><span class="st">s)([0-9])"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">1</span><span class="sc">\\</span><span class="st">3"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_squish</span>() </span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>midwest <span class="ot">&lt;-</span> mw_test <span class="sc">%&gt;%</span> </span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_table</span>(<span class="at">col_names =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(X2, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"total"</span>, <span class="st">"white"</span>, <span class="st">"black"</span>, <span class="st">"native"</span>,</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"asian"</span>, <span class="st">"other"</span>, <span class="st">"hispanic"</span>, <span class="st">"white_other"</span></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> </span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">year =</span> X1, total<span class="sc">:</span>black) <span class="sc">%&gt;%</span> </span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&lt;=</span> <span class="dv">1870</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(total<span class="sc">:</span>black), parse_number)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_column</span>(<span class="at">black_free =</span> <span class="fu">c</span>(<span class="dv">273080</span>, <span class="dv">69291</span>, <span class="dv">48185</span>, <span class="dv">30743</span>, <span class="dv">15664</span>, <span class="dv">6931</span>, <span class="dv">3630</span>, <span class="dv">500</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">black_slaves =</span> black <span class="sc">-</span> black_free, </span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>         <span class="at">region =</span> <span class="st">"Midwest"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(region, <span class="fu">everything</span>())</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a><span class="co"># trying for the US Total</span></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>us_raw <span class="ot">&lt;-</span> raw_pdf[[<span class="dv">29</span>]] <span class="sc">%&gt;%</span> </span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>()</span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(us_raw, all_years) <span class="sc">%&gt;%</span> </span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_subset</span>(<span class="st">"Table"</span>, <span class="at">negate =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>  .[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>)]</span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>all_years <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1790</span>, <span class="dv">1870</span>, <span class="at">by =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">"|"</span>)</span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a>us_raw[<span class="fu">str_detect</span>(us_raw, all_years)] <span class="sc">%&gt;%</span> </span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>  .[<span class="dv">2</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a robust function to get tables</span></span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>get_population <span class="ot">&lt;-</span> <span class="cf">function</span>(page_number, division, free_blacks){</span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>  <span class="co"># match regions and divisions</span></span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>  regions <span class="ot">&lt;-</span> <span class="fu">case_when</span>(</span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>    division <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"New England"</span>,<span class="st">"Middle Atlantic"</span>) <span class="sc">~</span> <span class="st">"Northeast"</span>,</span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>    division <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"East North Central"</span>, <span class="st">"West North Central"</span>) <span class="sc">~</span> <span class="st">"Midwest"</span>,</span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a>    division <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"South Atlantic"</span>, <span class="st">"East South Central"</span>, <span class="st">"West South Central"</span>) <span class="sc">~</span> <span class="st">"South"</span>,</span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>    division <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Mountain"</span>, <span class="st">"Pacific"</span>) <span class="sc">~</span> <span class="st">"West"</span>,</span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a>    division <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Northeast"</span>, <span class="st">"Midwest"</span>, <span class="st">"South"</span>, <span class="st">"West"</span>) <span class="sc">~</span> division,</span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"USA Total"</span></span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a>  <span class="co"># years to filter down to</span></span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a>  all_years <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1790</span>, <span class="dv">1870</span>, <span class="at">by =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="at">collapse =</span> <span class="st">"|"</span>)</span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a>  <span class="co"># get specific page and separate into lines</span></span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a>  raw_pdf_text <span class="ot">&lt;-</span> raw_pdf[[page_number]] <span class="sc">%&gt;%</span> </span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_split</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>()</span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter down to matching years and exclude table row</span></span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a>  raw_table <span class="ot">&lt;-</span> <span class="fu">str_subset</span>(raw_pdf_text, all_years) <span class="sc">%&gt;%</span> </span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_subset</span>(<span class="st">"Table"</span>, <span class="at">negate =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a>  clean_table <span class="ot">&lt;-</span>  raw_table <span class="sc">%&gt;%</span> </span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_remove_all</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a>    <span class="co"># find space in between digits and drop the space</span></span>
<span id="cb3-105"><a href="#cb3-105" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"([0-9])(</span><span class="sc">\\</span><span class="st">s)([0-9])"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">1</span><span class="sc">\\</span><span class="st">3"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-106"><a href="#cb3-106" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_squish</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a>    <span class="co"># couldn't get this to work nicely, but this works fine w/ separate</span></span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_table</span>(<span class="at">col_names =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a>    <span class="fu">separate</span>(X2, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"total"</span>, <span class="st">"white"</span>, <span class="st">"black"</span>, <span class="st">"native"</span>,</span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"asian"</span>, <span class="st">"other"</span>, <span class="st">"hispanic"</span>, <span class="st">"white_other"</span></span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span> </span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="at">year =</span> X1, total<span class="sc">:</span>black) <span class="sc">%&gt;%</span> </span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a>    <span class="co"># parse character numbers</span></span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(total<span class="sc">:</span>black), parse_number)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a>    <span class="co"># exclude percentage</span></span>
<span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(total <span class="sc">&gt;</span> <span class="dv">1000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-117"><a href="#cb3-117" aria-hidden="true" tabindex="-1"></a>    <span class="co"># add in the free black people</span></span>
<span id="cb3-118"><a href="#cb3-118" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_column</span>(<span class="at">black_free =</span> free_blacks) <span class="sc">%&gt;%</span></span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a>    <span class="co"># assign region/division</span></span>
<span id="cb3-120"><a href="#cb3-120" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">black_slaves =</span> black <span class="sc">-</span> black_free,</span>
<span id="cb3-121"><a href="#cb3-121" aria-hidden="true" tabindex="-1"></a>           <span class="at">division =</span> division,</span>
<span id="cb3-122"><a href="#cb3-122" aria-hidden="true" tabindex="-1"></a>           <span class="at">region =</span> regions,</span>
<span id="cb3-123"><a href="#cb3-123" aria-hidden="true" tabindex="-1"></a>           <span class="at">division =</span> <span class="fu">if_else</span>(division <span class="sc">==</span> region, <span class="cn">NA_character_</span>, division)) <span class="sc">%&gt;%</span></span>
<span id="cb3-124"><a href="#cb3-124" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(region, division, <span class="fu">everything</span>())</span>
<span id="cb3-125"><a href="#cb3-125" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-126"><a href="#cb3-126" aria-hidden="true" tabindex="-1"></a>  <span class="co"># return table</span></span>
<span id="cb3-127"><a href="#cb3-127" aria-hidden="true" tabindex="-1"></a>  clean_table</span>
<span id="cb3-128"><a href="#cb3-128" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-129"><a href="#cb3-129" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-130"><a href="#cb3-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-131"><a href="#cb3-131" aria-hidden="true" tabindex="-1"></a><span class="co"># Testing for Midwest</span></span>
<span id="cb3-132"><a href="#cb3-132" aria-hidden="true" tabindex="-1"></a><span class="fu">get_population</span>(<span class="dv">31</span>, <span class="st">"Midwest"</span>, <span class="fu">c</span>(<span class="dv">273080</span>, <span class="dv">69291</span>, <span class="dv">48185</span>, <span class="dv">30743</span>, <span class="dv">15664</span>, <span class="dv">6931</span>, <span class="dv">3630</span>, <span class="dv">500</span>))</span>
<span id="cb3-133"><a href="#cb3-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-134"><a href="#cb3-134" aria-hidden="true" tabindex="-1"></a><span class="co"># Testing for US</span></span>
<span id="cb3-135"><a href="#cb3-135" aria-hidden="true" tabindex="-1"></a><span class="fu">get_population</span>(<span class="dv">29</span>, <span class="st">"USA"</span>, <span class="fu">c</span>(<span class="dv">273080</span>, <span class="dv">69291</span>, <span class="dv">48185</span>, <span class="dv">30743</span>, <span class="dv">15664</span>, <span class="dv">6931</span>, <span class="dv">3630</span>, <span class="dv">500</span>, <span class="dv">0</span>))</span>
<span id="cb3-136"><a href="#cb3-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-137"><a href="#cb3-137" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the function at scale</span></span>
<span id="cb3-138"><a href="#cb3-138" aria-hidden="true" tabindex="-1"></a>total_census <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb3-139"><a href="#cb3-139" aria-hidden="true" tabindex="-1"></a>  <span class="at">page_number =</span> <span class="fu">c</span>(<span class="dv">29</span><span class="sc">:</span><span class="dv">42</span>),</span>
<span id="cb3-140"><a href="#cb3-140" aria-hidden="true" tabindex="-1"></a>  <span class="at">division =</span> <span class="fu">c</span>(<span class="st">"USA Total"</span>, <span class="st">"Northeast"</span>, <span class="st">"Midwest"</span>, <span class="st">"South"</span>, <span class="st">"West"</span>, </span>
<span id="cb3-141"><a href="#cb3-141" aria-hidden="true" tabindex="-1"></a>             <span class="st">"New England"</span>, <span class="st">"Middle Atlantic"</span>, <span class="st">"East North Central"</span>,</span>
<span id="cb3-142"><a href="#cb3-142" aria-hidden="true" tabindex="-1"></a>             <span class="st">"West North Central"</span>, <span class="st">"South Atlantic"</span>, </span>
<span id="cb3-143"><a href="#cb3-143" aria-hidden="true" tabindex="-1"></a>             <span class="st">"East South Central"</span>, <span class="st">"West South Central"</span>,</span>
<span id="cb3-144"><a href="#cb3-144" aria-hidden="true" tabindex="-1"></a>             <span class="st">"Mountain"</span>, <span class="st">"Pacific"</span></span>
<span id="cb3-145"><a href="#cb3-145" aria-hidden="true" tabindex="-1"></a>             ),</span>
<span id="cb3-146"><a href="#cb3-146" aria-hidden="true" tabindex="-1"></a>  <span class="co"># manually aggregated</span></span>
<span id="cb3-147"><a href="#cb3-147" aria-hidden="true" tabindex="-1"></a>  <span class="at">free_blacks =</span> <span class="fu">list</span>(</span>
<span id="cb3-148"><a href="#cb3-148" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">4880009</span>, <span class="dv">488070</span>, <span class="dv">434495</span>,<span class="dv">386293</span>,<span class="dv">619599</span>,<span class="dv">233634</span>,<span class="dv">186446</span>,<span class="dv">108435</span>,<span class="dv">59527</span>),</span>
<span id="cb3-149"><a href="#cb3-149" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">179738</span>,<span class="dv">155983</span>,<span class="dv">149526</span>,<span class="dv">141559</span>,<span class="dv">122434</span>,<span class="dv">92723</span>,<span class="dv">75156</span>,<span class="dv">46696</span>,<span class="dv">27070</span>),</span>
<span id="cb3-150"><a href="#cb3-150" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">273080</span>, <span class="dv">69291</span>, <span class="dv">48185</span>, <span class="dv">30743</span>, <span class="dv">15664</span>, <span class="dv">6931</span>, <span class="dv">3630</span>, <span class="dv">500</span>),</span>
<span id="cb3-151"><a href="#cb3-151" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">4420811</span>, <span class="dv">258346</span>,<span class="dv">235569</span>,<span class="dv">213991</span>,<span class="dv">181501</span>,<span class="dv">133980</span>,<span class="dv">107660</span>,<span class="dv">61239</span>,<span class="dv">32457</span>),</span>
<span id="cb3-152"><a href="#cb3-152" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">6380</span>,<span class="dv">4450</span>,<span class="dv">1215</span>),</span>
<span id="cb3-153"><a href="#cb3-153" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">31705</span>, <span class="dv">24711</span>,<span class="dv">23021</span>,<span class="dv">22634</span>,<span class="dv">21331</span>,<span class="dv">20782</span>,<span class="dv">19488</span>,<span class="dv">17313</span>,<span class="dv">13117</span>),</span>
<span id="cb3-154"><a href="#cb3-154" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">148033</span>,<span class="dv">131272</span>,<span class="dv">126505</span>,<span class="dv">118925</span>,<span class="dv">101103</span>,<span class="dv">71941</span>,<span class="dv">55668</span>,<span class="dv">29383</span>,<span class="dv">13953</span>),</span>
<span id="cb3-155"><a href="#cb3-155" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">130497</span>,<span class="dv">63699</span>,<span class="dv">45195</span>,<span class="dv">28997</span>,<span class="dv">15095</span>,<span class="dv">6584</span>,<span class="dv">3025</span>,<span class="dv">500</span>),</span>
<span id="cb3-156"><a href="#cb3-156" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">142583</span>,<span class="dv">5592</span>,<span class="dv">2990</span>,<span class="dv">1746</span>,<span class="dv">569</span>,<span class="dv">347</span>,<span class="dv">605</span>),</span>
<span id="cb3-157"><a href="#cb3-157" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">2216705</span>, <span class="dv">217753</span>,<span class="dv">197474</span>,<span class="dv">171778</span>,<span class="dv">153087</span>,<span class="dv">116920</span>,<span class="dv">96803</span>,<span class="dv">60009</span>,<span class="dv">31982</span>),</span>
<span id="cb3-158"><a href="#cb3-158" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">1464252</span>, <span class="dv">21447</span>,<span class="dv">19628</span>,<span class="dv">16246</span>,<span class="dv">11563</span>,<span class="dv">6525</span>,<span class="dv">3270</span>,<span class="dv">1230</span>,<span class="dv">475</span>),</span>
<span id="cb3-159"><a href="#cb3-159" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">739854</span>, <span class="dv">19146</span>,<span class="dv">18467</span>,<span class="dv">25967</span>,<span class="dv">16851</span>,<span class="dv">10535</span>,<span class="dv">7587</span>),</span>
<span id="cb3-160"><a href="#cb3-160" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">1555</span>,<span class="dv">206</span>,<span class="dv">46</span>),</span>
<span id="cb3-161"><a href="#cb3-161" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">4825</span>,<span class="dv">4244</span>,<span class="dv">1169</span>)</span>
<span id="cb3-162"><a href="#cb3-162" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-163"><a href="#cb3-163" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-164"><a href="#cb3-164" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">pmap</span>(., get_population)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-165"><a href="#cb3-165" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(data) <span class="sc">%&gt;%</span> </span>
<span id="cb3-166"><a href="#cb3-166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(data) <span class="sc">%&gt;%</span> </span>
<span id="cb3-167"><a href="#cb3-167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(region)</span>
<span id="cb3-168"><a href="#cb3-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-169"><a href="#cb3-169" aria-hidden="true" tabindex="-1"></a><span class="co"># test plot</span></span>
<span id="cb3-170"><a href="#cb3-170" aria-hidden="true" tabindex="-1"></a>total_census <span class="sc">%&gt;%</span> </span>
<span id="cb3-171"><a href="#cb3-171" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_slaves =</span> black_slaves<span class="sc">/</span>black <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-172"><a href="#cb3-172" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(division), region <span class="sc">!=</span> <span class="st">"USA Total"</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb3-173"><a href="#cb3-173" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> percent_slaves, <span class="at">color =</span> region)) <span class="sc">+</span></span>
<span id="cb3-174"><a href="#cb3-174" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb3-175"><a href="#cb3-175" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>region)</span>
<span id="cb3-176"><a href="#cb3-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-177"><a href="#cb3-177" aria-hidden="true" tabindex="-1"></a>total_census <span class="sc">%&gt;%</span> </span>
<span id="cb3-178"><a href="#cb3-178" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_slaves =</span> black_slaves<span class="sc">/</span>black <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-179"><a href="#cb3-179" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(division), region <span class="sc">!=</span> <span class="st">"USA Total"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-180"><a href="#cb3-180" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span> </span>
<span id="cb3-181"><a href="#cb3-181" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">!=</span> <span class="dv">1870</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-182"><a href="#cb3-182" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_slavery =</span> <span class="fu">mean</span>(percent_slaves),</span>
<span id="cb3-183"><a href="#cb3-183" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(percent_slaves)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-184"><a href="#cb3-184" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_slavery))</span>
<span id="cb3-185"><a href="#cb3-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-186"><a href="#cb3-186" aria-hidden="true" tabindex="-1"></a>total_census <span class="sc">%&gt;%</span> </span>
<span id="cb3-187"><a href="#cb3-187" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_slaves =</span> black_slaves<span class="sc">/</span>black <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-188"><a href="#cb3-188" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(division), region <span class="sc">!=</span> <span class="st">"USA Total"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-189"><a href="#cb3-189" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">!=</span> <span class="dv">1870</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-190"><a href="#cb3-190" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(percent_slaves)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-191"><a href="#cb3-191" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_inorder</span>(region), <span class="at">y =</span> percent_slaves, <span class="at">color =</span> year)) <span class="sc">+</span></span>
<span id="cb3-192"><a href="#cb3-192" aria-hidden="true" tabindex="-1"></a>  viridis<span class="sc">::</span><span class="fu">scale_color_viridis</span>() <span class="sc">+</span></span>
<span id="cb3-193"><a href="#cb3-193" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">width =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb3-194"><a href="#cb3-194" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.75</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb3-195"><a href="#cb3-195" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"Blacks enslaved as a percentage of the region's total black population  (%)"</span>,</span>
<span id="cb3-196"><a href="#cb3-196" aria-hidden="true" tabindex="-1"></a>       </span>
<span id="cb3-197"><a href="#cb3-197" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Years between 1790 and 1860"</span>) <span class="sc">+</span></span>
<span id="cb3-198"><a href="#cb3-198" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">25</span>, <span class="dv">50</span>, <span class="dv">75</span>, <span class="dv">90</span>, <span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb3-199"><a href="#cb3-199" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">90</span>)</span>
<span id="cb3-200"><a href="#cb3-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-201"><a href="#cb3-201" aria-hidden="true" tabindex="-1"></a>total_census <span class="sc">%&gt;%</span> <span class="fu">write_csv</span>(<span class="st">"2020/2020-06-16/census.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/rfordatascience\.github\.io\/tidytuesday\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>